<!doctype html>
<html lang=ar dir=rtl>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,viewport-fit=cover,user-scalable=no,initial-scale=1,maximum-scale=1,minimum-scale=1">
<meta name="description" content="نظام نقاط الأطفال">

<meta name="theme-color" content="#667eea">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<meta name="apple-mobile-web-app-title" content="نقاط الأطفال">
<meta name="mobile-web-app-capable" content="yes">
<meta name="application-name" content="نقاط الأطفال">

<link rel="icon" href="/icon-72.png" sizes="72x72">
<link rel="icon" href="/icon-96.png" sizes="96x96">
<link rel="icon" href="/icon-128.png" sizes="128x128">
<link rel="icon" href="/icon-192.png" sizes="192x192">
<link rel="icon" href="/icon-512.png" sizes="512x512">

<link rel="apple-touch-icon" href="/icon-152.png" sizes="152x152">
<link rel="apple-touch-icon" href="/icon-192.png" sizes="192x192">

<link rel="manifest" href="/manifest.json">

<meta name="apple-mobile-web-app-capable" content="yes">
<link rel="apple-touch-startup-image" href="/splash-2048x2732.png" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
<link rel="apple-touch-startup-image" href="/splash-1668x2388.png" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
<link rel="apple-touch-startup-image" href="/splash-1536x2048.png" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
<link rel="apple-touch-startup-image" href="/splash-1290x2796.png" media="(device-width: 430px) and (device-height: 932px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
<link rel="apple-touch-startup-image" href="/splash-1179x2556.png" media="(device-width: 393px) and (device-height: 852px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
<link rel="apple-touch-startup-image" href="/splash-1170x2532.png" media="(device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">

<title>نظام نقاط الأطفال</title>

<body>
  <script src=/src/main.js type=module></script>

  <script>
    if ('serviceWorker' in navigator)
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js')
          .then(registration => {
            if ('sync' in registration) registration.sync.register('background-sync')
          })
      })

    let deferredPrompt
    window.addEventListener('beforeinstallprompt', (e) => {
      e.preventDefault()
      deferredPrompt = e

      const installBanner = document.createElement('div')
      installBanner.innerHTML = `
        <div style="position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); background: #667eea; color: white; padding: 12px 20px; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.15); z-index: 1000; font-family: system-ui; display: flex; align-items: center; gap: 12px;">
          <span>تثبيت التطبيق على جهازك</span>
          <button id="installBtn" style="background: white; color: #667eea; border: none; padding: 6px 12px; border-radius: 4px; font-weight: bold; cursor: pointer;">تثبيت</button>
          <button id="dismissBtn" style="background: transparent; color: white; border: 1px solid white; padding: 6px 12px; border-radius: 4px; cursor: pointer;">إلغاء</button>
        </div>
      `
      document.body.appendChild(installBanner)

      document.getElementById('installBtn').addEventListener('click', () => {
        deferredPrompt.prompt()
        deferredPrompt.userChoice.then((choiceResult) => {
          deferredPrompt = null
          installBanner.remove()
        })
      })

      document.getElementById('dismissBtn').addEventListener('click', () => {
        installBanner.remove()
      })
    })
  </script>
</body>
</html>
